<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>To Do List</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Fuentes de Google -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: "Open Sans", sans-serif;
      background: linear-gradient(#0d4671, #92e1e2);
    }
    .container {
      max-width: 500px;
    }
    .list-group-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(135deg,#0d4671,#4ab8ba);
      color: white;
      border: none;
      border-radius: 10px;
      margin-bottom: 8px;
    }

    #entry {
    background-color: #ffffffaa;
    color: #0d4671;
    border: 2px solid #0d4671;
    padding: 8px 12px;
    width: 40%;
    }
    #entry:focus {
      outline: none;
      border-color: #92e1e2;
      background-color: #ffffffcc;
    }
    #entry::placeholder {
      color: #0d4671;
      opacity: 0.6;
      font-style: italic;
    }
  </style>
</head>
<body class="d-flex justify-content-center align-items-center vh-100">
  <div class="container text-center">

    <h1 class="mb-4 text-white" style="font-family: 'Poppins', sans-serif;">To Do List</h1>

    <!-- Mensajes de tareas -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-info p-2 m-2 small">
          {% for mensaje in messages %}
            <p class="m-0">{{ mensaje }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Formulario para agregar tareas -->
    <form action="/agregar" method="POST" class="mb-4">
      <div class="input-group">
        <input type="text" name="descripcion" id="entry" class="form-control" placeholder="Nueva tarea" required>
        <button class="btn btn-primary" type="submit" name="accion" value="inicio">Agregar al Inicio</button>
        <button class="btn btn-secondary" type="submit" name="accion" value="final">Agregar al Final</button>
      </div>
    </form>

    <!-- Lista de tareas -->
    <ul class="list-group">
      {% for tarea in tareas %}
      <li class="list-group-item bg-light">
        <span class="fw-bold">{{ tarea.descripcion }}</span>
        <span class="badge {% if tarea.estado == 'Pendiente' %}bg-warning{% else %}bg-success{% endif %}">
        {% if tarea.estado == 'Pendiente' %}
          ⏳ Pendiente
        {% else %}
          ✅ Completada
        {% endif %}
        </span>
        <div>
          <form action="/completar/{{ tarea.descripcion }}" method="POST" style="display:inline;">
            <button type="submit" class="btn btn-success btn-sm">Completar</button>
          </form>
          <form action="/eliminar/{{ tarea.descripcion }}" method="POST" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
          </form>
        </div>
      </li>
      {% endfor %}
    </ul>

  </div>

</body>
</html>
